<!DOCTYPE html>
<html>
<head>
  <title>Product Evaluation Experiment</title>
  <script src="https://unpkg.com/jspsych"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response"></script>
  <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice"></script>
  <script src="https://unpkg.com/@jspsych/plugin-preload"></script>
  <link href="https://unpkg.com/jspsych/css/jspsych.css" rel="stylesheet" type="text/css">
</head>
<body>
<script>
// Function to generate each trial with random price and rating
function generateTrials() {
  var trials = [];
  for (var i = 0; i < 2000; i++) {
    var price = Math.floor(Math.random() * (2000 - 200 + 1)) + 200;
    var rating = Math.floor(Math.random() * 5) + 1;

    var trial = {
      type: jsPsychSurveyMultiChoice,
      questions: [
        {prompt: `The product costs $${price}. Is it expensive?`, options: ['Yes', 'No', 'Don’t know'], required: true},
        {prompt: `The product has a rating of ${rating}. Is it high-rated?`, options: ['Yes', 'No', 'Don’t know'], required: true},
        {prompt: 'Considering its price and rating, is it a good purchase?', options: ['Yes', 'No', 'Don’t know'], required: true}
      ],
      preamble: `<img src="icon.png" alt="Product Icon">`
    };

    trials.push(trial);
  }
  return trials;
}

// Initialize jsPsych and start the experiment
var jsPsych = initJsPsych({
  on_finish: function() {
    jsPsych.data.get().localSave('csv','mydata.csv');
  }
});

// Start the experiment with the generated trials
jsPsych.run(generateTrials());
</script>
</body>
</html>

